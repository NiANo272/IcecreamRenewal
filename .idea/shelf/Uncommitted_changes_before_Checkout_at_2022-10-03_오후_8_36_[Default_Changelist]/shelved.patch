Index: app/src/main/java/com/example/icecream_renual/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.icecream_renual;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.BaseAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.GridView;\r\nimport android.widget.HorizontalScrollView;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport java.io.File;\r\nimport java.io.FilenameFilter;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Collections;\r\nimport java.util.Locale;\r\n\r\nimport androidx.databinding.DataBindingUtil;\r\nimport com.example.icecream_renual.databinding.ActivityMainBinding;\r\n\r\nimport org.w3c.dom.Text;\r\n\r\npublic class MainActivity extends AppCompatActivity implements View.OnClickListener{\r\n\r\n    ActivityMainBinding b;\r\n\r\n    private GridView gridView_cold;\r\n    private GridView gridView_warm;\r\n    private GridView gridView_freeze;\r\n    private GridViewAdapter adapter_cold;\r\n    private GridViewAdapter adapter_warm;\r\n    private GridViewAdapter adapter_freeze;\r\n    private GridViewAdapter adapter_search;\r\n    //파일 경로\r\n    private String path = \"/data/data/com.example.icecream_renual/files/\";\r\n    //파일 이름 저장\r\n    File file = new File(path);\r\n\r\n    int sort_state = 0; // 0 : default , 1 : name, 2 : date\r\n\r\n    Func func = new Func();\r\n\r\n    Boolean isAllFabVisible;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        b = DataBindingUtil.setContentView(this,R.layout.activity_main);\r\n//        setContentView(R.layout.activity_main1);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onResume(){\r\n        super.onResume();\r\n        //버튼 생성 및 OnclickListner 선언\r\n\r\n        b.fabAdd.setVisibility(View.GONE);\r\n        b.fabCancel.setVisibility(View.GONE);\r\n        b.fabSort.setVisibility(View.GONE);\r\n\r\n        isAllFabVisible = false;\r\n\r\n        b.fabMain.setOnClickListener(this);\r\n        b.fabAdd.setOnClickListener(this);\r\n        b.fabCancel.setOnClickListener(this);\r\n        b.fabSort.setOnClickListener(this);\r\n        b.btnNotification.setOnClickListener(this);\r\n        b.btnSetting.setOnClickListener(this);\r\n\r\n        //GridView에 아이콘 생성\r\n        adapter_cold = new GridViewAdapter();\r\n        adapter_warm = new GridViewAdapter();\r\n        adapter_freeze = new GridViewAdapter();\r\n        gridView_cold = (GridView) findViewById(R.id.field_cold);\r\n        gridView_warm = (GridView) findViewById(R.id.field_warm);\r\n        gridView_freeze = (GridView) findViewById(R.id.field_freeze);\r\n\r\n        //파일 읽기\r\n        FilenameFilter filter = new FilenameFilter() {\r\n            @Override\r\n            public boolean accept(File file, String s) {\r\n                return s.contains(\".txt\");\r\n            }\r\n        };\r\n        String[] fileNames = file.list(filter);\r\n        if (fileNames.length > 0) {\r\n            for (int i = 0; i < (fileNames.length); i++) {\r\n                String rFile = func.readFile(path + fileNames[i]);\r\n                //읽어온 파일 나누기\r\n                String[] txt_split = rFile.split(\"\\\\|\");\r\n                String name = txt_split[0];\r\n                int year = Integer.parseInt(txt_split[1]);\r\n                int month = Integer.parseInt(txt_split[2]);\r\n                int day = Integer.parseInt(txt_split[3]);\r\n                String category = txt_split[4];\r\n\r\n                if(category.equals(\"냉장\")){\r\n                    adapter_cold.addItem(new FoodData(name, category, year, month, day));\r\n                    gridView_cold.setAdapter(adapter_cold);\r\n                }\r\n                else if(category.equals(\"상온\")){\r\n                    adapter_warm.addItem(new FoodData(name, category, year, month, day));\r\n                    gridView_warm.setAdapter(adapter_warm);\r\n                }\r\n                else if(category.equals(\"냉동\")){\r\n                    adapter_freeze.addItem(new FoodData(name, category, year, month, day));\r\n                    gridView_freeze.setAdapter(adapter_freeze);\r\n                }\r\n            }\r\n        }\r\n        //검색 기능\r\n        EditText et_search = (EditText) findViewById(R.id.et_search);\r\n        et_search.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n                //입력값\r\n                String search = et_search.getText().toString();\r\n                //초기화\r\n                adapter_cold = new GridViewAdapter();\r\n                adapter_warm = new GridViewAdapter();\r\n                adapter_freeze = new GridViewAdapter();\r\n                gridView_cold.setAdapter(adapter_cold);\r\n                gridView_warm.setAdapter(adapter_warm);\r\n                gridView_freeze.setAdapter(adapter_freeze);\r\n\r\n                for (int i = 0; i < (fileNames.length); i++) {\r\n                    if(fileNames[i].toLowerCase(Locale.ROOT).contains(search)){\r\n                        String rFile = func.readFile(path + fileNames[i]);\r\n                        //읽어온 파일 나누기\r\n                        String[] txt_split = rFile.split(\"\\\\|\");\r\n                        String name = txt_split[0];\r\n                        int year = Integer.parseInt(txt_split[1]);\r\n                        int month = Integer.parseInt(txt_split[2]);\r\n                        int day = Integer.parseInt(txt_split[3]);\r\n                        String category = txt_split[4];\r\n\r\n                        if(category.equals(\"냉장\")){\r\n                            adapter_cold.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_cold.setAdapter(adapter_cold);\r\n                        }\r\n                        else if(category.equals(\"상온\")){\r\n                            adapter_warm.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_warm.setAdapter(adapter_warm);\r\n                        }\r\n                        else if(category.equals(\"냉동\")){\r\n                            adapter_freeze.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_freeze.setAdapter(adapter_freeze);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        b.fabAdd.setVisibility(View.GONE);\r\n        b.fabCancel.setVisibility(View.GONE);\r\n        b.fabSort.setVisibility(View.GONE);\r\n//        overridePendingTransition(0,0);\r\n    }\r\n\r\n\r\n    public void onClick(View v){ //implements View.OnClickListner 추가 필요\r\n\r\n        if(!isAllFabVisible){\r\n            b.fabAdd.show();\r\n            b.fabCancel.show();\r\n            b.fabSort.show();\r\n            isAllFabVisible = true;\r\n\r\n        }\r\n        else{\r\n            b.fabAdd.hide();\r\n            b.fabCancel.hide();\r\n            b.fabSort.hide();\r\n            isAllFabVisible = false;\r\n        }\r\n\r\n        if(v.getId() == R.id.fab_add){\r\n            startActivity(new Intent(this, AddActivity.class));\r\n        }\r\n\r\n        if(v.getId() == R.id.fab_cancel){\r\n\r\n        }\r\n\r\n        if(v.getId() == R.id.fab_sort){\r\n            if(sort_state == 0){\r\n                    sort_state = 1;\r\n                    adapter_cold = new GridViewAdapter();\r\n                    adapter_warm = new GridViewAdapter();\r\n                    adapter_freeze = new GridViewAdapter();\r\n\r\n                    FilenameFilter filter = new FilenameFilter() {\r\n                    @Override\r\n                    public boolean accept(File file, String name) {\r\n                        return name.contains(\".txt\");\r\n                    }\r\n                };\r\n                String[] fileName = file.list(filter);\r\n                Arrays.sort(fileName);\r\n                if (fileName.length > 0) {\r\n                    for (int i = 0; i < (fileName.length); i++) {\r\n                        String rFile = func.readFile(path + fileName[i]);\r\n                        //읽어온 파일 나누기\r\n                        String[] txt_split = rFile.split(\"\\\\|\");\r\n                        String name = txt_split[0];\r\n                        int year = Integer.parseInt(txt_split[1]);\r\n                        int month = Integer.parseInt(txt_split[2]);\r\n                        int day = Integer.parseInt(txt_split[3]);\r\n                        String category = txt_split[4];\r\n\r\n                        if(category.equals(\"냉장\")){\r\n                            adapter_cold.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_cold.setAdapter(adapter_cold);\r\n                        }\r\n                        else if(category.equals(\"상온\")){\r\n                            adapter_warm.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_warm.setAdapter(adapter_warm);\r\n                        }\r\n                        else if(category.equals(\"냉동\")){\r\n                            adapter_freeze.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_freeze.setAdapter(adapter_freeze);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if(sort_state == 1){\r\n                sort_state = 2;\r\n                gridView_cold.setAdapter(null);\r\n                adapter_cold = new GridViewAdapter();\r\n                adapter_warm = new GridViewAdapter();\r\n                adapter_freeze = new GridViewAdapter();\r\n\r\n                ArrayList<Name_Dday_Sort> name_dday = new ArrayList<Name_Dday_Sort>();\r\n\r\n                FilenameFilter filter = new FilenameFilter() {\r\n                    @Override\r\n                    public boolean accept(File file, String name) {\r\n                        return name.contains(\".txt\");\r\n                    }\r\n                };\r\n                String[] fileName = file.list(filter);\r\n                if (fileName.length > 0) {\r\n                    for (int i = 0; i < (fileName.length); i++) {\r\n                        String rFile = func.readFile(path + fileName[i]);\r\n                        //읽어온 파일 나누기\r\n                        String[] txt_split = rFile.split(\"\\\\|\");\r\n                        String name = txt_split[0];\r\n                        int year = Integer.parseInt(txt_split[1]);\r\n                        int month = Integer.parseInt(txt_split[2]);\r\n                        int day = Integer.parseInt(txt_split[3]);\r\n                        String category = txt_split[4];\r\n                        name_dday.add(new Name_Dday_Sort(name, calculateDday(year, month, day)));\r\n                    }\r\n                }\r\n                Collections.sort(name_dday);\r\n                if (fileName.length > 0) {\r\n                    for (int i = 0; i < (fileName.length); i++) {\r\n                        String rFile = func.readFile(path + name_dday.get(i).getName() + \".txt\");\r\n                        //읽어온 파일 나누기\r\n                        String[] txt_split = rFile.split(\"\\\\|\");\r\n                        String name = txt_split[0];\r\n                        int year = Integer.parseInt(txt_split[1]);\r\n                        int month = Integer.parseInt(txt_split[2]);\r\n                        int day = Integer.parseInt(txt_split[3]);\r\n                        String category = txt_split[4];\r\n\r\n                        if(category.equals(\"냉장\")){\r\n                            adapter_cold.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_cold.setAdapter(adapter_cold);\r\n                        }\r\n\r\n                        else if(category.equals(\"상온\")){\r\n                            adapter_warm.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_warm.setAdapter(adapter_warm);\r\n                        }\r\n                        else if(category.equals(\"냉동\")){\r\n                            adapter_freeze.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_freeze.setAdapter(adapter_freeze);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if(sort_state == 2){\r\n                sort_state = 0;\r\n                gridView_cold.setAdapter(null);\r\n                adapter_cold = new GridViewAdapter();\r\n                adapter_warm = new GridViewAdapter();\r\n                adapter_freeze = new GridViewAdapter();\r\n\r\n                FilenameFilter filter = new FilenameFilter() {\r\n                    @Override\r\n                    public boolean accept(File file, String name) {\r\n                        return name.contains(\".txt\");\r\n                    }\r\n                };\r\n                String[] fileName = file.list(filter);\r\n                if (fileName.length > 0) {\r\n                    for (int i = 0; i < (fileName.length); i++) {\r\n                        String rFile = func.readFile(path + fileName[i]);\r\n                        //읽어온 파일 나누기\r\n                        String[] txt_split = rFile.split(\"\\\\|\");\r\n                        String name = txt_split[0];\r\n                        int year = Integer.parseInt(txt_split[1]);\r\n                        int month = Integer.parseInt(txt_split[2]);\r\n                        int day = Integer.parseInt(txt_split[3]);\r\n                        String category = txt_split[4];\r\n\r\n                        if(category.equals(\"냉장\")){\r\n                            adapter_cold.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_cold.setAdapter(adapter_cold);\r\n                        }\r\n\r\n                        else if(category.equals(\"상온\")){\r\n                            adapter_warm.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_warm.setAdapter(adapter_warm);\r\n                        }\r\n                        else if(category.equals(\"냉동\")){\r\n                            adapter_freeze.addItem(new FoodData(name, category, year, month, day));\r\n                            gridView_freeze.setAdapter(adapter_freeze);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if(v.getId() == R.id.btn_notification){\r\n            startActivity(new Intent(this, NotificationActivity.class));\r\n            overridePendingTransition(0,0);\r\n        }\r\n\r\n        if(v.getId() == R.id.btn_setting){\r\n            startActivity(new Intent(this, SettingActivity.class));\r\n            overridePendingTransition(0,0);\r\n        }\r\n    }\r\n\r\n    //어댑터\r\n    public class GridViewAdapter extends BaseAdapter {\r\n        String TAG = MainActivity.class.getSimpleName();\r\n        ArrayList<FoodData> item = new ArrayList<FoodData>();\r\n\r\n        @Override\r\n        public int getCount() {\r\n            return item.size();\r\n        }\r\n\r\n        @Override\r\n        public Object getItem(int i) {\r\n            return item.get(i);\r\n        }\r\n\r\n        @Override\r\n        public long getItemId(int i) {\r\n            return i;\r\n        }\r\n\r\n        public void addItem(FoodData add_item) {\r\n            item.add(add_item);\r\n        }\r\n\r\n        @Override\r\n        public View getView(int i, View view, ViewGroup viewGroup) {\r\n            final Context context = viewGroup.getContext();\r\n            final FoodData foodData = item.get(i);\r\n\r\n            if (view == null) {\r\n                LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n                view = inflater.inflate(R.layout.activity_item_icon, viewGroup, false);\r\n\r\n                TextView tv_icon = (TextView) view.findViewById(R.id.foodicon);\r\n                TextView tv_name = (TextView) view.findViewById(R.id.tv_foodname);\r\n                TextView tv_quantity = (TextView) view.findViewById(R.id.tv_foodname);\r\n\r\n//                tv_icon.setImageResource(itemData.getResId());\r\n                tv_name.setText(foodData.getFoodName());\r\n//                tv_quantity.setText(itemData.get);\r\n                view.setBackgroundResource(R.drawable.red_ddaylist);\r\n\r\n                Log.d(TAG, \"getView() - [ \" + i + \" ] \" + foodData.getFoodName());\r\n            } else {\r\n                View view_123 = new View(context);\r\n                view_123 = (View) view;\r\n            }\r\n\r\n            //아이콘 클릭시 Info 팝업 생성\r\n            view.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    item_info i_info = new item_info();\r\n                    i_info.setNameText(foodData.getFoodName());\r\n                    startActivity(new Intent(view.getContext(), item_info.class));\r\n                    //intent 애니메이션 효과\r\n                    overridePendingTransition(R.anim.translate_up, R.anim.re_alpha);\r\n                }\r\n            });\r\n            return view;\r\n        }\r\n    }\r\n\r\n    public int calculateDday(int e_year, int e_month, int e_day){\r\n\r\n        // today date\r\n        Calendar calendar = Calendar.getInstance();\r\n        int n_year = calendar.get(Calendar.YEAR);\r\n        int n_month = calendar.get(Calendar.MONTH);\r\n        int n_day = calendar.get(Calendar.DAY_OF_MONTH);\r\n\r\n        long today = calendar.getTimeInMillis();\r\n\r\n        Calendar e_Calendar = Calendar.getInstance();\r\n        e_Calendar.set(e_year,e_month-1,e_day);\r\n        long expiryday = e_Calendar.getTimeInMillis();\r\n\r\n        long result = (expiryday-today)/(24*60*60*1000);\r\n        int remaindays = (int)result;\r\n\r\n        return remaindays;\r\n    }\r\n\r\n    public class Name_Dday_Sort implements Comparable<Name_Dday_Sort>{\r\n        private String name;\r\n        private int dday;\r\n\r\n        public Name_Dday_Sort(String name, int dday){\r\n            this.name = name;\r\n            this.dday = dday;\r\n        }\r\n\r\n        public int compareTo(Name_Dday_Sort nds){\r\n            if(nds.dday < dday){\r\n                return 1;\r\n            }\r\n            else if(nds.dday > dday){\r\n                return -1;\r\n            }\r\n            return 0;\r\n        }\r\n\r\n        public String getName(){\r\n            return name;\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/icecream_renual/MainActivity.java b/app/src/main/java/com/example/icecream_renual/MainActivity.java
--- a/app/src/main/java/com/example/icecream_renual/MainActivity.java	(revision 65b62b6d36eb3356e7a8dc97a7b3a6499e761e36)
+++ b/app/src/main/java/com/example/icecream_renual/MainActivity.java	(date 1664796953773)
@@ -366,6 +366,53 @@
         }
     }
 
+/*
+    public void addDialogMethod(){
+        final AddDialog addDialog = new AddDialog(this);
+        addDialog.show();
+
+        addDialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
+            @Override
+            public void onDismiss(DialogInterface dialogInterface) {
+                boolean isSaved = addDialog.getButtonStates();
+//                boolean isEdited = addDialog.isEdit();
+                if (isSaved == true) {
+                    String[] elements = addDialog.getelements();
+
+                    String name = elements[0];
+                    String date = elements[1];
+                    String[] date_split = date.split("\\."); //YYYY.MM.DD 형식을 YYYY MM DD 로 나누기
+                    int year = Integer.parseInt(date_split[0]);
+                    int month = Integer.parseInt(date_split[1]);
+                    int day = Integer.parseInt(date_split[2]);
+                    String category = elements[2];
+                    String memo = elements[3];
+
+//                    if (isEdited == true){
+//
+//                    }
+
+
+                    writeFile(name + ".txt", name + "|" + year + "|" + month + "|" + day + "|" + category + "|" + memo);
+                }
+            }
+        });
+    }
+    public void writeFile(String fileName, String msg){
+        try{
+            OutputStreamWriter oStreamWriter = new OutputStreamWriter(openFileOutput(fileName, MODE_PRIVATE));
+            oStreamWriter.write(msg);
+            oStreamWriter.close();
+        }
+        catch (FileNotFoundException e){
+            e.printStackTrace();
+        }
+        catch (IOException e){
+            e.printStackTrace();
+        }
+    }
+*/
+
     //어댑터
     public class GridViewAdapter extends BaseAdapter {
         String TAG = MainActivity.class.getSimpleName();
